<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Serve real files in place (assets, etc.)
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # If the matching file exists under /dist, serve it
  RewriteCond %{DOCUMENT_ROOT}/dist%{REQUEST_URI} -f
  RewriteRule ^(.*)$ /dist/$1 [L]

  # Otherwise hand the request to the SPA entry point
  RewriteRule ^ /dist/index.html [L]
</IfModule>

# Optional: avoid Apache looking for a missing error page
ErrorDocument 404 /dist/index.html
